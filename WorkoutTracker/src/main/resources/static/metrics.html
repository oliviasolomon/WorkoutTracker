<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Workout Metrics</title>
  <link rel="stylesheet" href="/style.css?v=abc123">
</head>
<body>
  <nav class="top-nav container" role="navigation" aria-label="Main Navigation">
    <div class="brand">Workout Tracker</div>
    <div class="nav-links">
      <a href="home.html">Home</a>
      <a href="metrics.html" class="active">Metrics</a>
      <a href="calendar.html">Calendar</a>
      <button id="logoutBtn" class="logout-btn">Sign Out</button>
    </div>
  </nav>

  <div class="container">
    <h1>Workout Metrics</h1>
    <div>
      <img id="chart" src="" alt="Workout Chart" style="width:800px;height:600px;">
    </div>

  <img id="chart" src="" alt="Workout Chart" style="width:800px;height:600px;">

  <script>
    function loadChart() {
      const userId = localStorage.getItem('user_id');
      let url = '/metrics/chart';
  
      const params = [];
      if (userId) {
        params.push('user_id=' + encodeURIComponent(userId));
      }
      // cache-buster to always see latest
      params.push('t=' + Date.now());
  
      if (params.length > 0) {
        url += '?' + params.join('&');
      }
  
      document.getElementById('chart').src = url;
    }
  
    loadChart();
  
    document.getElementById('logoutBtn').addEventListener('click', () => {
      localStorage.removeItem('user_id');
      localStorage.removeItem('username');
      sessionStorage.clear();
      window.location.href = 'login.html';
    });
  </script>
  </div>
</body>
</html>
